_HiStOrY_V2_
ALTER\040TABLE\040notes\040ADD\040COLUMN\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP;
await\040db.query(
\040\040'UPDATE\040notes\040SET\040title\040=\040?,\040body\040=\040?,\040updated_at\040=\040CURRENT_TIMESTAMP\040WHERE\040id\040=\040?\040AND\040user_id\040=\040?',
\040\040[title,\040body,\040req.params.id,\040req.session.userId]
);
await\040db.query(\040\040\040'UPDATE\040notes\040SET\040title\040=\040?,\040body\040=\040?,\040updated_at\040=\040CURRENT_TIMESTAMP\040WHERE\040id\040=\040?\040AND\040user_id\040=\040?',\040\040\040[title,\040body,\040req.params.id,\040req.session.userId]\040);
exit
CREATE\040TABLE\040users\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040email\040VARCHAR(255)\040NOT\040NULL\040UNIQUE,
);
CREATE\040TABLE\040notes\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040user_id\040INT,
\040\040title\040TEXT,
\040\040body\040TEXT,
\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)
);
CREATE\040TABLE\040notes\040(\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040user_id\040INT,\040\040\040title\040TEXT,\040\040\040body\040TEXT,\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040);
SHOW\040TABLES;
DESCRIBE\040users;
DESCRIBE\040notes;
SHOW\040CREATE\040TABLE\040users\134G
SHOW\040CREATE\040TABLE\040notes\134G
exit
CREATE\040TABLE\040users\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040email\040VARCHAR(255)\040UNIQUE\040NOT\040NULL,
);
CREATE\040TABLE\040notes\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040user_id\040INT\040NOT\040NULL,
\040\040title\040TEXT,
\040\040body\040TEXT,
\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040notes\040(\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040user_id\040INT\040NOT\040NULL,\040\040\040title\040TEXT,\040\040\040body\040TEXT,\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE\040);
exit
USE\040hello_app;
SHOW\040TABLES;
CREATE\040TABLE\040users\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040email\040VARCHAR(255)\040UNIQUE\040NOT\040NULL,
);
CREATE\040TABLE\040tasks\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040user_id\040INT\040NOT\040NULL,
\040\040title\040VARCHAR(255),
\040\040description\040TEXT,
\040\040due_date\040DATE,
\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,
\040\040category\040VARCHAR(100),
\040\040updated_at\040DATETIME,
\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040tasks\040(\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040user_id\040INT\040NOT\040NULL,\040\040\040title\040VARCHAR(255),\040\040\040description\040TEXT,\040\040\040due_date\040DATE,\040\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,\040\040\040category\040VARCHAR(100),\040\040\040updated_at\040DATETIME,\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE\040);
exit
USE\040hello-world
USE\040your_user
USE\040hello-world
USE\040hello_app
exit
SHOW\040DATABASES;
quit
//\040db.js
const\040mysql\040=\040require('mysql2/promise');
//\040db.js\040const\040mysql\040=\040require('mysql2/promise');
const\040pool\040=\040mysql.createPool({
\040\040host:\040'localhost',\040\040//\040Change\040if\040your\040DB\040is\040elsewhere
\040\040user:\040'your_mysql_user',
\040\040database:\040'your_database_name',
});
module.exports\040=\040pool;
USE\040hello_app
//\040db.js
const\040mysql\040=\040require('mysql2/promise');
//\040db.js\040const\040mysql\040=\040require('mysql2/promise');
const\040pool\040=\040mysql.createPool({
\040\040host:\040'localhost',\040\040//\040Change\040if\040your\040DB\040is\040elsewhere
\040\040user:\040'your_mysql_user',
\040\040database:\040'your_database_name',
});
module.exports\040=\040pool;
SHOW\040DATABASES;
USE\040hello_app
quit
USE\040hello_app
CREATE\040TABLE\040users\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040email\040VARCHAR(255)\040UNIQUE\040NOT\040NULL,
);
CREATE\040TABLE\040tasks\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040user_id\040INT\040NOT\040NULL,
\040\040title\040VARCHAR(255)\040NOT\040NULL,
\040\040description\040TEXT,
\040\040due_date\040DATE,
\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,
\040\040category\040VARCHAR(100),
\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)
);
CREATE\040TABLE\040tasks\040(\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040user_id\040INT\040NOT\040NULL,\040\040\040title\040VARCHAR(255)\040NOT\040NULL,\040\040\040description\040TEXT,\040\040\040due_date\040DATE,\040\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,\040\040\040category\040VARCHAR(100),\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040);
exit
USE\040hello_app
--\040Create\040the\040users\040table
CREATE\040TABLE\040users\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040email\040VARCHAR(255)\040NOT\040NULL\040UNIQUE,
);
--\040Create\040the\040tasks\040table
CREATE\040TABLE\040tasks\040(
\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040user_id\040INT\040NOT\040NULL,
\040\040title\040VARCHAR(255)\040NOT\040NULL,
\040\040description\040TEXT,
\040\040due_date\040DATE,
\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,
\040\040category\040VARCHAR(100),
\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040tasks\040(\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040user_id\040INT\040NOT\040NULL,\040\040\040title\040VARCHAR(255)\040NOT\040NULL,\040\040\040description\040TEXT,\040\040\040due_date\040DATE,\040\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,\040\040\040category\040VARCHAR(100),\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE\040);
exit
quit
exit
USE\040hello_app
CREATE\040TABLE\040IF\040NOT\040EXISTS\040users\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040email\040VARCHAR(255)\040NOT\040NULL\040UNIQUE,
);
CREATE\040TABLE\040IF\040NOT\040EXISTS\040tasks\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040user_id\040INT\040NOT\040NULL,
\040\040\040\040title\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040description\040TEXT,
\040\040\040\040due_date\040DATE,
\040\040\040\040category\040VARCHAR(100),
\040\040\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040IF\040NOT\040EXISTS\040tasks\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040user_id\040INT\040NOT\040NULL,\040\040\040\040\040title\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040description\040TEXT,\040\040\040\040\040due_date\040DATE,\040\040\040\040\040category\040VARCHAR(100),\040\040\040\040\040completed\040BOOLEAN\040DEFAULT\040FALSE,\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE\040);
exit
